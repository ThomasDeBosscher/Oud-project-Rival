{% extends 'base.html' %}

{% block title %}Compare companies | Rival.com{% endblock %}

{% block content %}
    <div class="container">
        <h1>Compare companies</h1>
        <section class="comparison-section card">
            <h2>Select two companies</h2>
            <form action="{{ url_for('main.compare') }}" method="get">
                <div class="form-group" style="display:flex; gap:.5rem; align-items:center; flex-wrap:wrap;">
                    <label for="item1">First company</label>
                    <select name="item1" id="item1" required class="input">
                        <option value="">— Select —</option>
                        {% for c in companies %}
                          <option value="{{ c.id }}" {% if c1 and c1.id == c.id %}selected{% endif %}>{{ c.name }}</option>
                        {% endfor %}
                    </select>
                    <label for="item2">Second company</label>
                    <select name="item2" id="item2" required class="input">
                        <option value="">— Select —</option>
                        {% for c in companies %}
                          <option value="{{ c.id }}" {% if c2 and c2.id == c.id %}selected{% endif %}>{{ c.name }}</option>
                        {% endfor %}
                    </select>
                    <button class="btn" type="submit">Compare</button>
                </div>
            </form>
        </section>
        {% if c1 and c2 %}
        <section class="results-section card" style="margin-top:1rem;">
            <h2>Financials</h2>
            <table>
                <thead>
                    <tr>
                        <th>Metric</th>
                        <th>{{ c1.name }}</th>
                        <th>{{ c2.name }}</th>
                    </tr>
                </thead>
                <tbody>
                    <tr><td>Ticker</td><td>{{ f1.ticker if f1 else '—' }}</td><td>{{ f2.ticker if f2 else '—' }}</td></tr>
                    <tr><td>Price</td><td>{% if f1 %}{{ f1.price or '—' }} {{ f1.currency or '' }}{% else %}—{% endif %}</td><td>{% if f2 %}{{ f2.price or '—' }} {{ f2.currency or '' }}{% else %}—{% endif %}</td></tr>
                    <tr><td>Market Cap</td><td>{% if f1 and f1.market_cap is not none %}{{ f1.market_cap|humanize }}{% else %}—{% endif %}</td><td>{% if f2 and f2.market_cap is not none %}{{ f2.market_cap|humanize }}{% else %}—{% endif %}</td></tr>
                    <tr><td>P/E</td><td>{{ f1.pe_ratio if f1 else '—' }}</td><td>{{ f2.pe_ratio if f2 else '—' }}</td></tr>
                    <tr><td>Revenue</td><td>{% if f1 and f1.revenue is not none %}{{ f1.revenue|humanize }}{% else %}—{% endif %}</td><td>{% if f2 and f2.revenue is not none %}{{ f2.revenue|humanize }}{% else %}—{% endif %}</td></tr>
                    <tr><td>Employees</td><td>{{ f1.employees if f1 else '—' }}</td><td>{{ f2.employees if f2 else '—' }}</td></tr>
                </tbody>
            </table>
        </section>
        {% endif %}
    </div>
{% endblock %}