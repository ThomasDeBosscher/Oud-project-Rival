{% extends 'base.html' %}

{% block title %}Rival.com â€” Dashboard{% endblock %}

{% block content %}
        <div class="container">
            <h1>Overzicht van concurrentie-activiteit</h1>
            <section class="stats">
                <h2>Realtime inzichten</h2>
            <div class="stat-item">
                <h3>Total Companies</h3>
                <p>{{ total_companies or 0 }}</p>
            </div>
            <div class="stat-item">
                <h3>Active Alerts</h3>
                <p>{{ active_alerts or 0 }}</p>
            </div>
            <div class="stat-item">
                    <h3>Snelle samenvatting</h3>
                <p>{{ recent_activities or 0 }}</p>
            </div>
        </section>
            <section class="recent-activities">
                <h2>Mijn bedrijven</h2>
            <ul>
                {% for activity in activities or [] %}
                    <li>{{ activity }}</li>
                {% else %}
                    <li>No recent activity.</li>
                {% endfor %}
            </ul>
        </section>
    </div>
{% endblock %}

{% block scripts %}
    {# Load Chart.js only if the chart canvas exists #}
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const canvas = document.getElementById('userGrowthChart');
            if (!canvas) return;
            const script = document.createElement('script');
            script.src = 'https://cdn.jsdelivr.net/npm/chart.js';
            script.onload = () => {
                const ctx = canvas.getContext('2d');
                new Chart(ctx, { type: 'line', data: { labels: ['Jan','Feb','Mar'], datasets: [{ label: 'Users', data: [1,2,3]}] }});
            };
            document.body.appendChild(script);
        });
    </script>
{% endblock %}